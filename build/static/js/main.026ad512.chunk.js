(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),s=a.n(c),i=a(51),o=a(47),l=a(77),u=a(17),j="REGISTER_SUCCESS",p="REGISTER_FAIL",d="LOGIN_FAIL",m="LOGIN_SUCCESS",b="VERIFY_EMAIL_SUCCESS",f="VERIFY_EMAIL_FAIL",O="INITIATE_PAYMENT_SUCCESS",h="INITIATE_PAYMENT_FAIL",g="GET_USER",x={token:localStorage.getItem("token"),payments:[],user:null,error_message:null,success_message:null},y=Object(o.b)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:case b:case j:return Object(u.a)(Object(u.a)({},e),{},{success_message:t.payload,error_message:null});case h:case f:case d:case p:return Object(u.a)(Object(u.a)({},e),{},{error_message:t.payload,success_message:null});case m:return localStorage.setItem("token",t.payload.info),Object(u.a)(Object(u.a)({},e),{},{token:t.payload.info,success_message:null,error_message:null});case g:return Object(u.a)(Object(u.a)({},e),{},{user:t.payload,payments:t.payload.payments});default:return e}}}),v=[l.a],_=o.c,S=Object(o.d)(y,{},_(o.a.apply(void 0,v))),k=a(22),w=(a.p,a(12)),E=a(24),C=a(183),I=a(172),N=a(168),T=a(179),A=a(171),F=a(182),R=a(165),W=a(173),D=a(180),L=a(57),Y=a.n(L),M=a(78),U=a(166),q=a(167),G=a(26),J=a.n(G),P=a(48),V=a(49),B=a.n(V),z="https://basicecommerec.herokuapp.com/",H={headers:{"Content-Type":"application/json"}},K=function(){var e=localStorage.getItem("token");return e&&(H.headers["X-AUTH-TOKEN"]=e),H},X=a(181),Q=a(3);function Z(){return Object(Q.jsxs)(M.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(Q.jsx)(R.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var $=Object(U.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ee=Object(k.b)((function(e){return{error_message:e.data.error_message}}),null)((function(e){var t=e.error_message,a=$(),r=Object(n.useState)(),c=Object(E.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(""),l=Object(E.a)(o,2),u=l[0],j=l[1],p=Object(n.useState)(""),b=Object(E.a)(p,2),f=b[0],O=b[1],h=function(e){e.preventDefault(),u&&f||i({id:"0",info:"All fields are required."});var t={email:u,password:f};S.dispatch(function(e){return function(){var t=Object(P.a)(J.a.mark((function t(a){var n,r;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=JSON.stringify(e),t.next=4,B.a.post(z+"api/auth/login",n,H);case 4:return r=(r=t.sent).data,t.abrupt("return",a({type:m,payload:{type:"login-success",info:r.message}}));case 9:return t.prev=9,t.t0=t.catch(0),t.t0=t.t0.response.data,t.abrupt("return",a({type:d,payload:{type:"login-fail",info:t.t0.message}}));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))};return Object(n.useEffect)((function(){t&&"login-fail"===t.type&&i({id:"0",info:t.info})}),[t]),Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsxs)(q.a,{component:"main",maxWidth:"xs",children:[Object(Q.jsx)(N.a,{}),Object(Q.jsxs)("div",{className:a.paper,children:[Object(Q.jsx)(C.a,{className:a.avatar,children:Object(Q.jsx)(Y.a,{})}),Object(Q.jsx)(M.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(Q.jsxs)("form",{className:a.form,noValidate:!0,children:[s&&"0"===s.id?Object(Q.jsx)("div",{className:a.root,children:Object(Q.jsx)(X.a,{severity:"error",children:s.info})}):null,Object(Q.jsx)(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){return j(e.target.value)}}),Object(Q.jsx)(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return O(e.target.value)}}),Object(Q.jsx)(A.a,{control:Object(Q.jsx)(F.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(Q.jsx)(I.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:function(e){return h(e)},children:"Sign In"}),Object(Q.jsxs)(W.a,{container:!0,children:[Object(Q.jsx)(W.a,{item:!0,xs:!0,children:Object(Q.jsx)(R.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(Q.jsx)(W.a,{item:!0,children:Object(Q.jsx)(R.a,{href:"#",variant:"body2",children:"Don't have an account? Sign up"})})]})]})]}),Object(Q.jsx)(D.a,{mt:8,children:Object(Q.jsx)(Z,{})})]})})}));function te(){return Object(Q.jsxs)(M.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(Q.jsx)(R.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var ae=Object(U.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ne=Object(k.b)((function(e){var t=e.data;return{error_message:t.error_message,success_message:t.success_message}}),null)((function(e){var t=e.error_message,a=e.success_message,r=ae(),c=Object(n.useState)(""),s=Object(E.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(""),u=Object(E.a)(l,2),d=u[0],m=u[1],b=Object(n.useState)(),f=Object(E.a)(b,2),O=f[0],h=f[1],g=function(e){e.preventDefault(),h(""),d&&i||h({id:"0",info:"All fields are required."});var t={email:i,password:d};console.log(t),S.dispatch(function(e){return function(){var t=Object(P.a)(J.a.mark((function t(a){var n;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=JSON.stringify(e),t.next=4,B.a.post(z+"api/auth/register",n,H);case 4:t.sent,a({type:j,payload:{type:"register-success",info:"Registration successful, a verification link has been sent to your email."}}),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.t0=t.t0.response.data,t.abrupt("return",a({type:p,payload:{type:"register-fail",info:t.t0.message}}));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))};return Object(n.useEffect)((function(){a&&"register-success"===a.type&&h({id:"1",info:a.info}),t&&"register-fail"===t.type&&h({id:"0",info:t.info})}),[t,a]),Object(Q.jsxs)(q.a,{component:"main",maxWidth:"xs",children:[Object(Q.jsx)(N.a,{}),Object(Q.jsxs)("div",{className:r.paper,children:[Object(Q.jsx)(C.a,{className:r.avatar,children:Object(Q.jsx)(Y.a,{})}),Object(Q.jsx)(M.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(Q.jsxs)("form",{className:r.form,noValidate:!0,children:[O&&"0"===O.id?Object(Q.jsx)("div",{className:r.root,children:Object(Q.jsx)(X.a,{severity:"error",children:O.info})}):null,O&&"1"===O.id?Object(Q.jsx)("div",{className:r.root,children:Object(Q.jsx)(X.a,{severity:"success",children:O.info})}):null,Object(Q.jsx)(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:i,onChange:function(e){return o(e.target.value)}}),Object(Q.jsx)(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:d,onChange:function(e){return m(e.target.value)},autoComplete:"current-password"}),Object(Q.jsx)(A.a,{control:Object(Q.jsx)(F.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(Q.jsx)(I.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.submit,onClick:function(e){return g(e)},children:"Sign Up"}),Object(Q.jsxs)(W.a,{container:!0,children:[Object(Q.jsx)(W.a,{item:!0,xs:!0,children:Object(Q.jsx)(R.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(Q.jsx)(W.a,{item:!0,children:Object(Q.jsx)(R.a,{href:"#",variant:"body2",children:"Don't have an account? Sign in"})})]})]})]}),Object(Q.jsx)(D.a,{mt:8,children:Object(Q.jsx)(te,{})})]})})),re=Object(k.b)((function(e){var t=e.data;return{success_message:t.success_message,error_message:t.error_message}}),null)((function(e){var t=e.success_message,a=e.error_message,r=Object(n.useState)(),c=Object(E.a)(r,2),s=c[0],i=c[1],o=Object(w.g)(),l=Object(w.h)().token;return Object(n.useEffect)((function(){l?S.dispatch(function(e){return function(){var t=Object(P.a)(J.a.mark((function t(a){var n;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.post(z+"api/auth/verifyemail/".concat(e),H);case 3:return n=(n=t.sent).data,t.abrupt("return",a({type:b,payload:{type:"verify-email-success",info:n.message}}));case 8:return t.prev=8,t.t0=t.catch(0),t.t0=t.t0.response.data,t.abrupt("return",a({type:f,payload:{type:"verify-email-fail",info:t.t0.message}}));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(l)):o.push("/register")}),[]),Object(n.useEffect)((function(){t&&"verify-email-success"===t.type&&i(t),a&&"verify-email-fail"===a.type&&i(a)}),[a,t]),Object(Q.jsx)("div",{children:Object(Q.jsx)("p",{children:s?s.info:null})})})),ce=a(174),se=a(178),ie=a(177),oe=a(175),le=a(176),ue=[],je=Object(U.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}})),pe=Object(k.b)((function(e){var t=e.data,a=t.user,n=t.payments,r=t.error_message;return{payments:n,user:a,success_message:t.success_message,error_message:r}}),null)((function(e){var t=e.user,a=e.payments,c=e.error_message,s=e.success_message,i=je(),o=Object(n.useState)(0),l=Object(E.a)(o,2),u=l[0],j=l[1];Object(n.useEffect)((function(){S.dispatch(function(){var e=Object(P.a)(J.a.mark((function e(t){var a;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get(z+"users/me",K());case 3:a=(a=e.sent).data,t({type:g,payload:a.message}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]);var p=function(e){e.preventDefault();var t={amount:u};S.dispatch(function(e){return function(){var t=Object(P.a)(J.a.mark((function t(a){var n,r;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=JSON.stringify(e),t.next=4,B.a.post(z+"api/payment/initiate",n,K());case 4:r=(r=t.sent).data,console.log(r),a({type:O,payload:{type:"inititate-payment-success",info:r.paymentLink}}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),t.t0=t.t0.response.data,a({type:h,payload:{type:"initiate-payment-fail",info:t.t0.message}});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))};return Object(n.useEffect)((function(){ue=a}),[a]),Object(Q.jsxs)(r.a.Fragment,{children:[Object(Q.jsx)("p",{children:t?t.email:null}),Object(Q.jsx)("input",{onChange:function(e){return j(e.target.value)},type:"number"}),Object(Q.jsx)("button",{onClick:function(e){return p(e)},children:"Button"}),Object(Q.jsxs)(ce.a,{size:"small",children:[Object(Q.jsx)(oe.a,{children:Object(Q.jsxs)(le.a,{children:[Object(Q.jsx)(ie.a,{children:"id"}),Object(Q.jsx)(ie.a,{children:"Amount"}),Object(Q.jsx)(ie.a,{children:"Payment Type"}),Object(Q.jsx)(ie.a,{align:"right",children:"Satus"})]})}),Object(Q.jsx)(se.a,{children:ue.map((function(e){return Object(Q.jsxs)(le.a,{children:[Object(Q.jsx)(ie.a,{children:e.payment_info.id}),Object(Q.jsx)(ie.a,{children:e.payment_info.amount}),Object(Q.jsx)(ie.a,{children:e.payment_info.payment_type}),Object(Q.jsx)(ie.a,{align:"right",children:e.payment_info.status})]},e.payment_info.id)}))})]}),Object(Q.jsxs)("div",{className:i.seeMore,children:[c&&"initiate-payment-fail"===c.type?c.info:null,s&&"inititate-payment-success"===s.type?window.location.replace(s.info):null]})]})})),de=a(65),me=function(e){var t=e.component,a=e.token,n=Object(de.a)(e,["component","token"]);return Object(Q.jsx)(w.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return a?Object(Q.jsx)(t,Object(u.a)(Object(u.a)({},n),e)):Object(Q.jsx)(w.a,{to:{pathname:"/",state:{from:e.location}}})}}))},be=function(e){var t=e.component,a=e.token,n=Object(de.a)(e,["component","token"]);return Object(Q.jsx)(w.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return a?Object(Q.jsx)(w.a,{to:{pathname:"/user/dashboard",state:{from:e.location}}}):Object(Q.jsx)(t,Object(u.a)(Object(u.a)({},n),e))}}))},fe=Object(k.b)((function(e){return{token:e.data.token}}),null)((function(e){var t=e.token;return Object(Q.jsxs)(w.d,{children:[Object(Q.jsx)(be,{exact:!0,path:"/",token:t,component:ee}),Object(Q.jsx)(be,{exact:!0,path:"/register",token:t,component:ne}),Object(Q.jsx)(w.b,{exact:!0,path:"/verifyemail/:token",component:re}),Object(Q.jsx)(me,{token:t,exact:!0,path:"/user/dashboard",component:pe})]})}));var Oe=function(){return Object(Q.jsx)("div",{className:"App",children:Object(Q.jsx)(fe,{})})};s.a.render(Object(Q.jsx)(r.a.StrictMode,{children:Object(Q.jsx)(i.a,{children:Object(Q.jsx)(k.a,{store:S,children:Object(Q.jsx)(Oe,{})})})}),document.getElementById("root"))}},[[135,1,2]]]);
//# sourceMappingURL=main.026ad512.chunk.js.map